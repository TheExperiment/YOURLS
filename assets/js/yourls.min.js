/*!
 * YOURLS v2.0-alpha
 * http://yourls.org
 * Copyright 2009-2014 YOURLS
 * Licensed under MIT
 */
function add_link(){if($(".add-button").hasClass("disabled"))return!1;var a=$(".add-url").val(),b=$("#nonce-add").val(),c=$(".add-keyword").val();return a?(add_loading(".add-button"),void $.getJSON(ajaxurl,{action:"add",url:a,keyword:c,nonce:b},function(a){"success"===a.status&&($(".admin-main-table tbody").prepend(a.html),$(".notfound").css("display","none"),increment_counter(),toggle_share_fill_boxes(a.url.url,a.shorturl,a.url.title)),add_link_reset(),end_loading(".add-button")})):!1}function remove_link(a){if(confirm("Really delete?")){var b=$("#keyword_"+a).val(),c=get_var_from_query($("#delete-button-"+a).attr("href"),"nonce");$.getJSON(ajaxurl,{action:"delete",keyword:b,nonce:c,id:a},function(b){1===b.success?($("#id-"+a).fadeOut(function(){$(this).remove(),1===$("#main_table tbody tr").length&&$("#nourl_found").css("display","")}),decrement_counter()):alert("Could not delete link")})}}function toggle_share(a){var b=$("#longurl-"+a).val(),c=$("#title-"+a).val(),d=$("#shorturl-"+a).val();toggle_share_fill_boxes(b,d,c)}function toggle_share_fill_boxes(a,b,c){$("#copylink").val(b),$("#titlelink").val(c),$("#origlink").attr("href",a).html(a),$("#statlink").attr("href",b+"+").html(b+"+");var d=c?c+" "+b:b;$("#tweet_body").val(d).keypress(),$("#shareboxes").slideDown("300"),$("#tweet_body").keypress()}function update_share(){var a=encodeURIComponent($("#tweet_body").val()),b=encodeURIComponent($("#copylink").val()),c="http://twitter.com/intent/tweet?status="+a,d="http://friendfeed.com/share/bookmarklet/frame#title="+a,e="http://www.facebook.com/share.php?u="+b;$("#share_tw").attr("href",c),$("#share_ff").attr("href",d),$("#share_fb").attr("href",e);var f=parseInt(140-$("#tweet_body").val().length,10);$("#charcount").toggleClass("negative",0>f).text(f)}function add_loading(a){add_disable(a),$(a).attr("data-html",$(a).html()).html("").append('<i class="fa fa-refresh fa-spin"></i>')}function end_loading(a){end_disable(a),$(a).html($(a).attr("data-html")).removeAttr("data-html")}function add_disable(a){$(a).addClass("disabled")}function end_disable(a){$(a).removeClass("disabled")}function add_link_reset(){$(".add-keyword").val(""),$(".add-url").val("").focus()}function increment_counter(){$(".increment").each(function(){$(this).html(parseInt($(this).html(),10)+1)})}function decrement_counter(){$(".increment").each(function(){$(this).html(parseInt($(this).html(),10)-1)})}function init_clipboard(){if("undefined"==typeof ZeroClipboard)return!1;if(ZeroClipboard.detectFlashSupport()){ZeroClipboard.setDefaults({moviePath:moviepath,hoverClass:"btn-clipboard-hover",activeClass:"btn-clipboard-active"});var a=new ZeroClipboard($(".btn-clipboard"));a.on("wrongflash",function(a,b){alert("Your flash is too old "+b.flashVersion)}),a.on("mouseover",function(){$(this).tooltip("show")}),a.on("mouseout",function(){var a=null;a===$(this).attr("data-temp-title")&&$(this).attr("data-original-title",a).removeAttr("data-temp-title"),$(this).tooltip("hide")}),a.on("complete",function(){if(!$(this).attr("data-temp-title")){var a=$(this).attr("data-copied-hint");$(this).attr("data-temp-title",$(this).attr("data-original-title")),$(this).attr("data-original-title",a),$(this).tooltip("show")}})}else $(".btn-clipboard").hide()}function get_var_from_query(a,b,c){void 0===b&&(b="nonce"),void 0===c&&(c=""),a=a.split("?")[1],a=a.split("&");var d=0;for(d=0;d<a.length;d++)if(a[d].split("=")[0]===b)return a[d].split("=")[1];return c}$(document).ready(function(){init_clipboard(),$("a.button").on("click",function(){return $(this).hasClass("disabled")?!1:void 0}),add_link_reset(),$(".add-url").focus(),$("button.add-button").on("click",function(){add_link()}),$(".add-url, .add-keyword").keypress(function(a){13===a.which&&setTimeout(function(){add_link()},350)}),$("#tweet_body:visible").focus(),$("#tweet_body").keypress(function(){setTimeout(function(){update_share()},50)})}),jQuery.cookie=function(a,b,c){if("undefined"==typeof b){var d=null;if(document.cookie&&""!==document.cookie)for(var e=document.cookie.split(";"),f=0;f<e.length;f++){var g=jQuery.trim(e[f]);if(g.substring(0,a.length+1)===a+"="){d=decodeURIComponent(g.substring(a.length+1));break}}return d}c=c||{},null===b&&(b="",c.expires=-1);var h="";if(c.expires&&("number"==typeof c.expires||c.expires.toUTCString)){var i;"number"==typeof c.expires?(i=new Date,i.setTime(i.getTime()+24*c.expires*60*60*1e3)):i=c.expires,h="; expires="+i.toUTCString()}var j=c.path?"; path="+c.path:"",k=c.domain?"; domain="+c.domain:"",l=c.secure?"; secure":"";document.cookie=[a,"=",encodeURIComponent(b),h,j,k,l].join("")};